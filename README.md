–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

# VKinder Bot

–ë–æ—Ç –¥–ª—è –∑–Ω–∞–∫–æ–º—Å—Ç–≤ –í–ö–æ–Ω—Ç–∞–∫—Ç–µ

1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ë–î.
2. –¢–æ–∫–µ–Ω –í–ö: –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω —Å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏.
3. –†–µ–∞–ª–∏–∑—É–π—Ç–µ 3 –º–æ–¥—É–ª—è:
    * –ú–æ–¥—É–ª—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –ë–î - database.py
    * –ú–æ–¥—É–ª—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å API –í–ö–æ–Ω—Ç–∞–∫—Ç–µ - vk_handler.py
    * –±–æ—Ç - bot.py
3. –ó–∞–ø—É—Å–∫: –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ –∏ –Ω–∞—á–Ω–∏—Ç–µ –æ–±—â–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥–æ–π "–ø—Ä–∏–≤–µ—Ç".
4. –ö–æ–º–∞–Ω–¥—ã:
    * –ü–æ–∏—Å–∫: –ù–∞—á–∞—Ç—å –ø–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
    * –î–∞–ª–µ–µ: –ü–æ–∫–∞–∑–∞—Ç—å —Å–ª–µ–¥—É—é—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
    * –î–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ: –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
    * –ß—ë—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫: –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
    * –ú–æ–∏ –∏–∑–±—Ä–∞–Ω–Ω—ã–µ: –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

## database.py------------------------------------------

1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ë–î.
2. –°–æ–∑–¥–∞–π—Ç–µ –∫–∞–∫ –º–∏–Ω–∏–º—É–º 3 —Ç–∞–±–ª–∏—Ü—ã –≤ –ë–î –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –±–æ—Ç–∞ —Å –ë–î.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

      `pip install -r requirements.txt`
      –°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª (.env)

2. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env:
   VK_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω
   DB_NAME=VKinder
   DB_USER=postgres
   DB_PASSWORD=–ø–∞—Ä–æ–ª—å
   DB_HOST=localhost

–ù–∞—Å—Ç—Ä–æ–π–∫–∞
–î–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø–æ–∏—Å–∫–∞ –∏–∑–º–µ–Ω–∏—Ç–µ –≤–µ—Å–∞ –≤ –∫–ª–∞—Å—Å–µ VKHandler:
SEARCH_WEIGHTS = {
'age': 0.4, # –í–µ—Å –≤–æ–∑—Ä–∞—Å—Ç–∞
'city': 0.3, # –í–µ—Å –≥–æ—Ä–æ–¥–∞
'interests': 0.2, # –í–µ—Å –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤
'friends': 0.1 # –í–µ—Å –æ–±—â–∏—Ö –¥—Ä—É–∑–µ–π
}
–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
pytest test_database.py

### Type hints

–í—Å–µ –ø—É–±–ª–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã —É–∂–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ —Ç–∏–ø–æ–≤, –Ω–∞–ø—Ä–∏–º–µ—Ä:
def add_user(self, vk_id: int, first_name: str, last_name: str,
age: int, sex: str, city: str) -> None:

# vk_handler.py------------------------------------------

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- –ü–æ–∏—Å–∫ –ø–æ –º–Ω–æ–∂–µ—Å—Ç–≤—É –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤ (–≤–æ–∑—Ä–∞—Å—Ç, –≥–æ—Ä–æ–¥, –∏–Ω—Ç–µ—Ä–µ—Å—ã)
- –£–º–Ω–æ–µ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –õ–∞–π–∫–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
- –ß–µ—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

–ö–æ–º–∞–Ω–¥—ã
–ø–æ–∏—Å–∫ - –Ω–∞—á–∞—Ç—å –Ω–æ–≤—ã–π –ø–æ–∏—Å–∫
–∏–∑–±—Ä–∞–Ω–Ω–æ–µ - –ø–æ–∫–∞–∑–∞—Ç—å –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è

# bot.py------------------------------------------

# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è –∫–ª–∞—Å—Å–∞ `Bot`

## –û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

–ö–ª–∞—Å—Å `Bot` –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –æ—Å–Ω–æ–≤–Ω—É—é –ª–æ–≥–∏–∫—É –±–æ—Ç–∞ –¥–ª—è –∑–Ω–∞–∫–æ–º—Å—Ç–≤ –í–ö–æ–Ω—Ç–∞–∫—Ç–µ.
–û–Ω –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è,
—É–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–∏—Å–∫–æ–º –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤ –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ–º —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö.

## –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

```python
# def __init__(self) -> None
```

–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä –±–æ—Ç–∞:

- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å VK API
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- –°–æ–∑–¥–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ VK API
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å–ª–æ–≤–∞—Ä—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã

### `run()`

```python
# def run(self) -> None
```

–ó–∞–ø—É—Å–∫–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞:

1. –ü—Ä–æ—Å–ª—É—à–∏–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è longpoll
2. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
3. –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ —Å–±–æ—è—Ö

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**

```python
# bot = Bot()
# bot.run()
```

### `_handle_event(event)`

```python
# def _handle_event(self, event) -> None
```

–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Ö–æ–¥—è—â–µ–µ —Å–æ–±—ã—Ç–∏–µ –æ—Ç VK API.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

- `event` - –æ–±—ä–µ–∫—Ç —Å–æ–±—ã—Ç–∏—è –æ—Ç VK LongPoll

**–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:**

- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø —Å–æ–±—ã—Ç–∏—è (—Ç–µ–∫—Å—Ç –∏–ª–∏ payload)
- –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
- –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –∏ –ª–æ–≥–∏—Ä—É–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏—è

### `_handle_payload(user_id, payload)`

```python
# def _handle_payload(self, user_id: int, payload: Dict) -> None
```

–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ inline-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

- `user_id` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –í–ö–æ–Ω—Ç–∞–∫—Ç–µ
- `payload` - —Å–ª–æ–≤–∞—Ä—å —Å –¥–∞–Ω–Ω—ã–º–∏ –¥–µ–π—Å—Ç–≤–∏—è

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:**

- `add_fav` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
- `like` - –ª–∞–π–∫ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏
- `next` - —Å–ª–µ–¥—É—é—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- `block` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ —á–µ—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫

### `_handle_text(user_id, text)`

```python
# def _handle_text(self, user_id: int, text: str) -> None
```

–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

- `user_id` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –í–ö–æ–Ω—Ç–∞–∫—Ç–µ
- `text` - —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è (–≤ –Ω–∏–∂–Ω–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–µ)

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∫–æ–º–∞–Ω–¥—ã:**

- `–ø—Ä–∏–≤–µ—Ç` - –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- `–ø–æ–∏—Å–∫` - –Ω–∞—á–∞—Ç—å –ø–æ–∏—Å–∫ –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤
- `–∏–∑–±—Ä–∞–Ω–Ω–æ–µ` - –ø–æ–∫–∞–∑–∞—Ç—å –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### `_start_search(user_id)`

```python
# def _start_search(self, user_id: int) -> None
```

–ó–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –ø–æ–∏—Å–∫–∞ –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

- `user_id` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –í–ö–æ–Ω—Ç–∞–∫—Ç–µ

**–ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã:**

1. –ü–æ–ª—É—á–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
2. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –ë–î
3. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫—ç—à –ø–æ–∏—Å–∫–∞
4. –ü–æ–ª—É—á–∞–µ—Ç –∏ —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
5. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–∏—Å–∫–∞
6. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–µ—Ä–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### `_show_user(user_id)`

```python
# def _show_user(self, user_id: int) -> None
```

–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∫–∞—Ä—Ç–æ—á–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

- `user_id` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä–æ–º—É –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–∞—Ä—Ç–æ—á–∫—É

**–§–æ—Ä–º–∞—Ç –∫–∞—Ä—Ç–æ—á–∫–∏:**

- –ò–º—è –∏ —Ñ–∞–º–∏–ª–∏—è
- –í–æ–∑—Ä–∞—Å—Ç
- –ì–æ—Ä–æ–¥
- –°—Å—ã–ª–∫–∞ –Ω–∞ –ø—Ä–æ—Ñ–∏–ª—å
- –¢–æ–ø-3 —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞

### `_show_next_user(user_id)`

```python
# def _show_next_user(self, user_id: int) -> None
```

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ª–µ–¥—É—é—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –ø–æ–∏—Å–∫–∞.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

- `user_id` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∑–∞–ø—Ä–æ—Å–∏–≤—à–µ–≥–æ —Å–ª–µ–¥—É—é—â—É—é –∫–∞—Ä—Ç–æ—á–∫—É

### `_show_favorites(user_id)`

```python
# def _show_favorites(self, user_id: int) -> None
```

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

- `user_id` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∑–∞–ø—Ä–æ—Å–∏–≤—à–µ–≥–æ —Å–ø–∏—Å–æ–∫

**–§–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞:**

- –ù—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫
- –°—Å—ã–ª–∫–∏ –Ω–∞ –ø—Ä–æ—Ñ–∏–ª–∏
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –≤ 10 –∑–∞–ø–∏—Å–µ–π

### `_send_message(user_id, message, keyboard, attachment)`

```python
# def _send_message(self, user_id: int, message: str, 
#                  keyboard: Optional[str] = None, 
#                  attachment: Optional[str] = None) -> None
```

–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

- `user_id` - ID –ø–æ–ª—É—á–∞—Ç–µ–ª—è
- `message` - —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
- `keyboard` - JSON-–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `attachment` - –≤–ª–æ–∂–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### `_main_keyboard()`

```python
# def _main_keyboard(self) -> str
```

–°–æ–∑–¥–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω—É—é –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**

- JSON-–ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã —Å –∫–Ω–æ–ø–∫–∞–º–∏:
    - "–ü–æ–∏—Å–∫"
    - "–ò–∑–±—Ä–∞–Ω–Ω–æ–µ"

## –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```python
# from bot import Bot
# from dotenv import load_dotenv
# 
# load_dotenv()
# 
# if __name__ == '__main__':
#     bot = Bot()
#     try:
#         bot.run()
#     except KeyboardInterrupt:
#         print("–ë–æ—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω")
```

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–ö–ª–∞—Å—Å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Ç–∏–ø—ã –æ—à–∏–±–æ–∫:

- –û—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ VK API
- –û—à–∏–±–∫–∏ —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- –û—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –æ—à–∏–±–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ,
–∞ –¥–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ –ª–æ–≥.

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.8+
- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏–∑ requirements.txt
- –¢–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞ VK API —Å –ø—Ä–∞–≤–∞–º–∏: messages, photos, groups
- –î–æ—Å—Ç—É–ø –∫ PostgreSQL

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ —Å–æ–±—ã—Ç–∏—è –∏ –æ—à–∏–±–∫–∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ –ª–æ–≥ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º:

- –í—Ä–µ–º–µ–Ω–∏ —Å–æ–±—ã—Ç–∏—è
- ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –¢–∏–ø–∞ —Å–æ–±—ã—Ç–∏—è
- –î–µ—Ç–∞–ª–µ–π –æ—à–∏–±–∫–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã:
pip install pytest-cov
pytest --cov=bot test_bot.py
pytest test_bot.py -v
–ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã –≤ —Ç–µ—Å—Ç–∞—Ö:
–§–∏–∫—Å—Ç—É—Ä–∞ mock_bot:
–°–æ–∑–¥–∞–µ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä Bot —Å –∑–∞–º–æ–∫–∞–Ω–Ω—ã–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
–ú–æ–∫–∞–µ—Ç –≤—Å–µ –≤–Ω–µ—à–Ω–∏–µ –≤—ã–∑–æ–≤—ã (VK API, –ë–î)
–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –∫–æ–º–∞–Ω–¥:
–ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∞–∫—Ü–∏—é –Ω–∞ –∫–æ–º–∞–Ω–¥—É "–ø–æ–∏—Å–∫"
–ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –∫–æ–º–∞–Ω–¥
–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ payload-–¥–µ–π—Å—Ç–≤–∏–π:
–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
–õ–∞–π–∫ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏
–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –ß–°
–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤:
_show_user - –ø—Ä–æ–≤–µ—Ä—è–µ–º —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏
_start_search - –ø—Ä–æ–≤–µ—Ä—è–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫—ç—à–∞
_show_favorites - –ø—Ä–æ–≤–µ—Ä—è–µ–º –≤—ã–≤–æ–¥ —Å–ø–∏—Å–∫–∞
–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:
–ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –æ—à–∏–±–∫–∏ –Ω–µ –ø–∞–¥–∞—é—Ç
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ

–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
–õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ vkinder.log

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ PEP8

pip install flake8 pylint
flake8 . --max-line-length=120
pylint *.py

### –ò—Ç–æ–≥–æ–≤—ã–π checklist

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ             | –°—Ç–∞—Ç—É—Å                        |
|------------------------|-------------------------------|
| –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫       | ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, try-except     |
| –†–∞–±–æ—Ç–∞ —Å –ë–î            | ‚úÖ –í—Å–µ –º–µ—Ç–æ–¥—ã –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã   |
| –ö–Ω–æ–ø–∫–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞      | ‚úÖ Inline-–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞           |
| –õ–∞–π–∫–∏ —Ñ–æ—Ç–æ             | ‚úÖ –ú–µ—Ç–æ–¥ like_photo            |
| –§–æ—Ç–æ —Å –æ—Ç–º–µ—Ç–∫–∞–º–∏       | ‚úÖ –í–∫–ª—é—á–µ–Ω—ã –≤ –ø–æ–∏—Å–∫            |
| –û–±—Ö–æ–¥ 1000 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ | ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ + –ø–∞–≥–∏–Ω–∞—Ü–∏—è     |
| –ü–æ–∏—Å–∫ –ø–æ –∏–Ω—Ç–µ—Ä–µ—Å–∞–º     | ‚úÖ –†–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –∏–Ω—Ç–µ—Ä–µ—Å–∞–º   |
| –í–µ—Å–∞ –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤         | ‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –≤–µ—Å–∞          |
| –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è           | ‚úÖ –ü–æ–ª–Ω–∞—è README + docstrings  |
| –¢–µ—Å—Ç—ã                  | ‚úÖ Pytest –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ |
| PEP8                   | ‚úÖ Flake8 + Black              |
| Type hints             | ‚úÖ –î–ª—è –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤            |

–í—Å–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã! üöÄ
